
## Сравнение ссылок и объектов (== и equals)

### Основные подходы к сравнению объектов
В Java сравнение объектов может выполняться двумя способами:

1. **Оператор `==`** — используется для сравнения ссылок.
2. **Метод `equals`** — используется для сравнения содержимого объектов (логического равенства).

---

### Сравнение с использованием `==`

Оператор `==` проверяет, указывают ли две ссылки на один и тот же объект в памяти.

**Пример:**
```java
String str1 = new String("Hello");
String str2 = new String("Hello");
System.out.println(str1 == str2); // false, так как это разные объекты в памяти

String str3 = "World";
String str4 = "World";
System.out.println(str3 == str4); // true, так как строки из пула строк указывают на один объект
```

**Особенности:**
- Работает быстро, так как сравнивает адреса в памяти.
- Не используется для проверки логического равенства содержимого объектов.

---

### Сравнение с использованием `equals`

Метод `equals` в классе `Object` по умолчанию сравнивает ссылки, аналогично оператору `==`. Однако классы могут переопределять этот метод для сравнения содержимого объектов.

**Пример:**
```java
String str1 = new String("Hello");
String str2 = new String("Hello");
System.out.println(str1.equals(str2)); // true, так как содержимое строк одинаково
```

**Переопределение метода `equals`:**
Для пользовательских классов необходимо явно переопределять `equals`.

```java
public class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (obj == null || getClass() != obj.getClass()) return false;
        Person person = (Person) obj;
        return age == person.age && name.equals(person.name);
    }

    @Override
    public int hashCode() {
        return Objects.hash(name, age);
    }
}

Person p1 = new Person("Alice", 30);
Person p2 = new Person("Alice", 30);
System.out.println(p1.equals(p2)); // true, так как содержимое объектов одинаково
```

**Ключевые моменты:**
- Переопределение `equals` часто требует также переопределения `hashCode` для обеспечения согласованности.
- Используется для сравнения логического равенства объектов.

---

### Сравнение примитивных типов
Для примитивных типов оператор `==` сравнивает их значения.

**Пример:**
```java
int a = 10;
int b = 10;
System.out.println(a == b); // true, так как значения равны

double x = 0.1 * 3;
double y = 0.3;
System.out.println(x == y); // false, из-за особенностей работы с числами с плавающей точкой
```

Для сравнения чисел с плавающей точкой рекомендуется использовать погрешность (`epsilon`):
```java
final double EPSILON = 1e-10;
if (Math.abs(x - y) < EPSILON) {
    System.out.println("x и y равны");
}
```

---

### Итоги
| **Метод**        | **Назначение**                              | **Пример использования** |
|-------------------|--------------------------------------------|--------------------------|
| `==`             | Проверка равенства ссылок или значений примитивов | `obj1 == obj2`          |
| `equals`         | Проверка логического равенства объектов     | `obj1.equals(obj2)`     |

- Используйте `==` для примитивных типов и проверки ссылок.
- Переопределяйте `equals` в пользовательских классах для сравнения содержимого объектов.
