#### [Основные возможности](#Основные-возможности-1)
#### [Как создавался инструмент](#Как-создавался-инструмент-1)
#### [Запуск JShell](#Запуск-jshell-1)
#### [Примеры использования](#Примеры-использования-1)
#### [Сохранение и загрузка сессий](#Сохранение-и-загрузка-сессий-1)
#### [Продвинутые возможности](#Продвинутые-возможности-1)
#### [Под капотом JShell](#Под-капотом-jshell-1)
#### [Полезные команды](#Полезные-команды-1)

---
# JShell: Интерактивная оболочка Java

`JShell` — это инструмент, представленный в Java 9, который позволяет разработчикам исполнять фрагменты кода (snippets) на Java в интерактивной оболочке. Он предоставляет среду для быстрого прототипирования, отладки и изучения возможностей языка.

---

## Основные возможности

- **Интерактивное выполнение кода**: проверка выражений и инструкций в режиме реального времени.
- **Поддержка различных конструкций**: создание переменных, методов, классов.
- **Сохранение и загрузка сессий**: возможность восстановления прогресса.
- **Экспорт кода**: преобразование сессии в Java-файлы для использования в проектах.

---

## Как создавался инструмент

JShell был разработан для упрощения работы с Java, ориентируясь на аналогичные инструменты в других языках программирования, такие как Python REPL и IRB в Ruby. Главной целью было предоставить программистам возможность быстро тестировать идеи, не создавая дополнительных файлов или проектов.

JShell интегрирован с Java Virtual Machine (JVM) и использует стандартные компиляторы Java для анализа и выполнения кода. Под капотом он создает временные классы и пакеты для выполнения каждой команды, что обеспечивает полное соответствие спецификации языка.

---

## Запуск JShell

Запуск `JShell` осуществляется из командной строки. Убедитесь, что установлен JDK 9 или выше, затем выполните:

```bash
jshell
```

После выполнения этой команды откроется интерактивная оболочка, готовая принимать Java-команды.

---

## Примеры использования

### Объявление переменных и базовые операции

```text
jshell> int a = 42;
a ==> 42

jshell> a + 8;
$1 ==> 50
```

### Создание методов

```text
jshell> int multiply(int x, int y) {
   ...> return x * y;
   ...> }
|  создан метод multiply(int, int)

jshell> multiply(7, 6);
$2 ==> 42
```

### Импорт библиотек

```text
jshell> import java.util.stream.IntStream;

jshell> IntStream.range(1, 5).sum();
$3 ==> 10
```

---

## Сохранение и загрузка сессий

### Сохранение текущей сессии

Для сохранения всей работы используйте команду:

```text
jshell> /save session.jsh
```

### Загрузка сессии

Чтобы восстановить ранее сохранённую сессию, выполните:

```bash
jshell session.jsh
```

---

## Продвинутые возможности

### Визуализация текущего состояния

JShell позволяет просматривать текущие переменные, методы и команды:

```text
jshell> /vars
|  int a = 42

jshell> /methods
|  int multiply(int, int)

jshell> /list
| 1 : int a = 42;
| 2 : int multiply(int x, int y) {
      return x * y;
  }
```

### Работа с классами

```text
jshell> class Calculator {
   ...>     int add(int x, int y) {
   ...>         return x + y;
   ...>     }
   ...> }
|  создан класс Calculator

jshell> Calculator calc = new Calculator();
calc ==> Calculator@3b07d329

jshell> calc.add(10, 15);
$1 ==> 25
```

### Исключения

JShell упрощает отладку ошибок:

```text
jshell> int divide(int x, int y) {
   ...> return x / y;
   ...> }
|  создан метод divide(int, int)

jshell> divide(10, 0);
|  java.lang.ArithmeticException thrown: / by zero
|      at divide (#2:2)
```

---

## Под капотом JShell

JShell использует динамическую компиляцию: каждый вводимый фрагмент компилируется в класс или метод, который затем загружается JVM. Это обеспечивает высокую производительность и совместимость с остальной частью экосистемы Java.

Каждое выражение исполняется в контексте временного класса, созданного JShell, что позволяет сохранять состояние между командами.

---

## Полезные команды

- `/help` — вывод справки по командам JShell.
- `/vars` — просмотр всех объявленных переменных.
- `/methods` — просмотр всех объявленных методов.
- `/list` — список всех фрагментов кода.
- `/reset` — сброс текущей сессии.
- `/save <filename>` — сохранение текущей сессии в файл.
- `/exit` — выход из JShell.
